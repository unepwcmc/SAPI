<h2>New split: handle names</h2>
<p>
  <i class="icon-info-sign"></i>
  Names can be assigned to multiple split outputs.
</p>
<%= nomenclature_change_form do |f| %>
  <%= f.fields_for :input do |ff| %>

    <%= ff.fields_for :input_name_reassignments do |fff| %>
      <div class="control-group">
        <label class="control-label">
          <%= fff.object.reassignable.name_status %>
          <%= fff.object.reassignable.full_name %>
        </label>
        <div class="controls">
          <%= fff.select :output_ids,
            options_for_select(
              @nomenclature_change.outputs.map{ |o| [o.taxon_concept.full_name, o.id] },
              ff.object.input_name_reassignments.map(&:reassignment_targets).flatten.
                map(&:output).compact.map(&:id)
            ),
            {}, {:class => 'simple-taxon-concept', :multiple => ''}
          %>
          <input type="checkbox" class="select-all-checkbox" checked>Select All
        </div>
      </div>
    <% end %>

  <% end %>
<% end %>