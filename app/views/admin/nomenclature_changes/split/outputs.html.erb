<h2>New split: outputs</h2>
<%= split_blurb %>

<h3>Select taxa to split into:</h3>

<%= nomenclature_change_form do |f| %>
  <ol>
  <%= f.fields_for :outputs do |ff| %>

    <li>
    <%= outputs_selection ff %>
    <div class="control-group">
      <label class="control-label">Existing taxon concept:</label>
      <div class="controls">
        <%= ff.text_field :taxon_concept_id, {
          :class => 'taxon-concept input-taxon',
          :'data-name' => ff.object.taxon_concept.try(:full_name),
          :'data-taxonomy-id' => @taxonomy.id,
          :'data-name-status' => ff.object.taxon_concept.try(:name_status),
          :'data-name-status-filter' => ['A', 'N', 'S', 'T'].to_json
        } %>
      </div>
    </div>
    <div class="upgrade-info">
      <div class="control-group">
        <label class="control-label">New taxon parent:</label>
        <div class="controls">
          <!-- TODO figure out the restrictions on the auto complete here, none for now -->
          <%= ff.text_field :new_parent_id, {
            :class => 'taxon-concept parent-taxon',
            :'data-name' => ff.object.new_parent.try(:full_name),
            :'data-name-status' => ff.object.new_parent.try(:name_status),
            :'data-name-status-filter' => ['A'].to_json,
            :'data-taxonomy-id' => @taxonomy.id
          } %>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">New taxon name:</label>
        <div class="controls">
          <%= ff.text_field :new_scientific_name, {
            :class => 'new-scientific-name'
          } %>
          <label class="new-scientific-name-eg">e.g. 'africana' for Loxodonta africana</label>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">New taxon author & year:</label>
        <div class="controls">
          <%= ff.text_field :new_author_year, {
            :class => 'new-author-year'
          } %>
        </div>
      </div>
    </div>
    </li>
  <% end %>
  <p><%= f.link_to_add 'Add another output', :outputs %></p>
  </ol>
<% end %>
